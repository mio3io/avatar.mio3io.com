# アバターについての質問

Twitter の DM や BOOTH メッセージによる導入・改変・トラブルのサポートは行っておりません。
公式 Discord では多くの方が参照できるため返答する場合があります。
お問い合わせ前にお読みください。

## シェーダーは何を使っていますか

A：アバターの設定済みシェーダーは [UTS2](https://github.com/unity3d-jp/UnityChanToonShaderVer2_Project/releases) になっています。が、今後 lilToon に移行する可能性があります。
「UTS2_ShaderOnly_v2.0.8_Release.unitypackage」のパッケージを予めインポートしておいてください。
透過やラメで [UnlitWF](https://github.com/whiteflare/Unlit_WF_ShaderSuite) など他のシェーダーを使用している場合は各モデルの説明に書いています。

## 素体の一部が消えます

衣装を脱がせると素体の一部が線になっている・凹んでいるのは素体メッシュのブレンドシェイプで見えなくなっているためです。
当モデルは素体メッシュ（主に `Body` という名前のオブジェクト）に貫通防止のためのブレンドシェイプ`body_slim_*` `body_hide_*`を実装しており、衣装の形状に合わせて肩やウエストなど貫通させたくない部分だけ一時的に凹ませることができます。水着を着たり着替えたりするときはこのブレンドシェイプの数字も一緒に変更してください。

## アップロードすると衣装が消えます

軽量化のため VRChat にアップロードする必要のないオブジェクトは非表示＋Tag を EditorOnly にしてビルドに含めないようにしています。使用したいオブジェクトはアクティブにしたうえで Tag を Untagged に変更してください。

## 改変用テクスチャはどこにありますか

主にアバターの改変用 CLIP/PSD はファイルサイズが大きいため Unitypackage とは別の ZIP ファイルにしている場合があります。購入ページからファイル名に「`_Textures`」のついた ZIP を別途ダウンロードしてください。

## 改変用テクスチャの表示がおかしい

当モデルのテクスチャは主に「[CLIP STUDIO PAINT](https://www.clipstudio.net/)」で作成されています。

テクスチャは CLIP ファイルを CLIP STUDIO PAINT で開くと、完全な状態で編集できます。
それ以外のツールでは CLIP STUDIO PAINT 特有の機能が消え、表示がおかしくなる場合があります。
同梱の PSD ファイルは CLIP STUDIO PAINT で変換したものです。

また、グラーデーションマップを使用しているため対応していない GIMP などでは正常に開くことができません。

対応ツールをお持ちでない場合は購入していただくか、PNG ファイルを編集してください。

## 標準の表情はどこで設定できますか

Write Defaults が非推奨になり、当モデルも Write Defaults OFF 前提のアニメーター構造になっています。
そのため、デフォルトの表情も Body メッシュではなくアニメーションクリップで設定しています。

`Animations/Face/(AvatarName)_face_default.anim` で設定してください。
このファイルは `Animations/Controllers/(AvatarName)_FX.controller` の `DefaultFace` レイヤーで再生されます。

## リップシンクが機能しません

表情を変更しているときにリップシンクをしなくなるのは破綻を防ぐための基本仕様です。

汎用的な干渉対策で表情変更時はリップシンクと自動まばたきなどの FaceTracking をオフにしています。
Controllers/(AvatarName)_FX.controller の FaceTracking レイヤーで制御していますので、トラッキングしたい場合はこのレイヤーを編集してください。FaceTracking をオンにする場合作成した表情の組み合わせによってはメッシュが破綻する場合があることにご注意ください。（目を閉じている時にまばたきが重なるなど）編集する場合はこれをご理解のうえ、解説サイトなどを参考に各自の表情設定に適した干渉対策を行って下さい。

常時リップシンクが機能しない場合はアニメーションにリップシンク用のブレンドシェイプがアニメーションファイルに含まれている可能性があります。

## MMDワールドで表情が変わりません

当モデルは VRChat のダンスワールドには対応しておりません。

VRChat 公式で WriteDefaults の使用が非推奨となったため、当モデルも WriteDefaults は OFF 前提のコントローラー構造になっています。

ほとんどのダンスワールドでは WriteDefaults を ON にする必要があるようです。そのため当モデルに限らず WriteDefaults が OFF 前提で作られているアバターは表情が動きません。

権利的に問題のあるワールドもあるため、確認のうえ自己責任で調整をお願いいたします。

※ 本家の MMD で使用できるように互換の表情のみを実装しているアバターもあります。

## 目隠れシェイプキーがありません

目隠れはシェイプキーではなくボーンを変形させて作っています。

## エラーが出ます

エラーの原因は個人の環境によってさまざまなため私にもわかりませんが、[Dynamic Bone](https://assetstore.unity.com/packages/tools/animation/dynamic-bone-16743?locale=ja-JP) を導入していない場合のエラーが多いようです。

この場合 Dynamic Bone を購入して導入するか、エラーの出ているオブジェクトのコンポーネントを全部削除してください。ヒエラルキーの検索ボックスに「Dynamic Bone」と入力するとコンポーネントがついているオブジェクトが抽出されます。

## その他不具合かわからないが挙動がおかしい

まずは Q＆A に解決方法が無いかと、最新バージョンに更新してみてください。
報告されている不具合なら最新版で修正されている場合があります。
最新版でも直らず、判断がつかない場合は [BOOTH メッセージ](https://mio3works.booth.pm/)からご報告ください

これに限らず不具合等は Twitter 等で拡散をする前に作者にご連絡ください。
